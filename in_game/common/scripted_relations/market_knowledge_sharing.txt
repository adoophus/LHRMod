market_knowledge_sharing = {
	type = diplomacy
	relation_type = oneway
	break_on_war = yes
	diplomatic_cost_request = knowledge_sharing_cost
	institution_spread_to_second = monthly_institution_spread_severe
	gold_to_first = {
		value = scope:second.monthly_income_trade_and_tax
		multiply = 0.1
	}
	category = {
		offer = CATEGORY_ECONOMY_ACTIONS
		request = CATEGORY_ECONOMY_ACTIONS
		cancellation = CATEGORY_ECONOMY_ACTIONS
		break = CATEGORY_ECONOMY_ACTIONS
	}

	visible = {
		scope:actor = {
			has_limited_diplomacy = no
		}
		scope:recipient = {
			has_limited_diplomacy = no
		}
	}

	offer_visible = {
		scope:actor = {
			any_institutions_embraced = {
				and = {
					exists = scope:recipient
					not = { is_embraced_for = scope:recipient }
				}
			}
		}
	}
	offer_enabled = {
		scope:actor = {
			has_limited_diplomacy = no
			any_institutions_embraced = {
				and = {
					exists = scope:recipient
					not = { is_embraced_for = scope:recipient }
				}
			}
		}
		scope:recipient = {
			has_limited_diplomacy = no
			within_diplomatic_range = scope:actor
			capital = {
				market = {
					in_trade_range_of = scope:actor
				}
			}
		}
	}

	request_visible = {
		scope:recipient = {
			any_institutions_embraced = {
				and = {
					exists = scope:actor
					not = { is_embraced_for = scope:actor }
				}
			}
		}
	}

	request_enabled = {
		scope:actor = {
			has_limited_diplomacy = no
		}
		scope:recipient = {
			has_limited_diplomacy = no
			within_diplomatic_range = scope:actor
			capital = {
				market = {
					in_trade_range_of = scope:actor
				}
			}
			any_institutions_embraced = {
				and = {
					exists = scope:actor
					not = { is_embraced_for = scope:actor }
				}
			}
		}
	}

    wants_to_give_diplo_chance = {
        base = -20
        same_international_organization = 5
        trust_in_actor = 1
        negative_opinion = -0.5
        positive_opinion = 0.2
    }

	will_expire_trigger = {
		OR = {
			scope:recipient = {
				not = { within_diplomatic_range = scope:actor }
				not = {
					capital = {
						market = {
							in_trade_range_of = scope:actor
						}
					}
				}
				not = {
					any_institutions_embraced = {
						and = {
							exists = scope:actor
							not = { is_embraced_for = scope:actor }
						}
					}
				}
			}
		}
	}
}