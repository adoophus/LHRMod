turmoil_in_brandenburg = {

	image = "gfx/interface/illustrations/disaster/turmoil_in_brandenburg.dds"
	
	monthly_spawn_chance = monthly_spawn_chance_unique

	can_start = {
		tag = BRA
		in_civil_war = no
		has_any_active_disaster = no
		has_ruler = yes
		ruler.dynasty ?= dynasty:wittelsbach_dynasty
		government_type = government_type:monarchy
		is_member_of_international_organization = international_organization:hre


		custom_tooltip = {
			text = had_csd_disaster_variable_tt
			NOT = { has_variable = had_turmoil_in_brandenburg_disaster_variable }
		}
	}
	

	can_end = {
		turmoil_in_brandenburg_end_trigger = yes
	}
	modifier = {
		#global_max_control = -0.05
		#global_monthly_control = -0.0005
		monthly_legitimacy = -0.02
	}
	
	on_start = {
		set_variable = { name = bra_wittelsbacher_investment_var value = 0 }
		set_variable = { name = bra_wittelsbacher_neglect_var value = 0 }
		set_variable = robber_barons_issues_are_ignored

		trigger_event_non_silently = turmoil_in_brandenburg.1
	}
	on_end = { 
		
		remove_variable = robber_barons_issues_are_ignored
		remove_variable = robber_barons_issues_are_dealt_with
		remove_variable = PRU_robber_barons_not_active
		remove_variable = bra_wittelsbacher_investment_var
		remove_variable = bra_wittelsbacher_neglect_var

		set_variable = had_turmoil_in_brandenburg_disaster_variable
	}
	
	on_monthly = {
		if = {
			limit = {
				has_variable = bra_wittelsbacher_investment_var
				has_variable = bra_wittelsbacher_neglect_var
			}
			random_list = {
				20 = {custom_tooltip = an_event_occurs_tt}
				80 = {custom_tooltip = no_event_occurs_tt}
			}
			hidden_effect = {
				random_list = {
					80 = { }
					2 = {
						trigger_event_silently = turmoil_in_brandenburg.4
					}
					2 = {
						trigger_event_silently = turmoil_in_brandenburg.5
					}
					2 = {
						trigger_event_silently = turmoil_in_brandenburg.6
					}
					2 = {
						trigger_event_silently = turmoil_in_brandenburg.7
					}
					2 = {
						trigger_event_silently = turmoil_in_brandenburg.8
					}
					2 = {
						trigger_event_silently = turmoil_in_brandenburg.9
					}
					2 = {
						trigger_event_silently = turmoil_in_brandenburg.10
					}
					2 = {
						trigger_event_silently = turmoil_in_brandenburg.11
					}
					2 = {
						trigger_event_silently = turmoil_in_brandenburg.12
					}
					2 = {
						trigger_event_silently = turmoil_in_brandenburg.13
					}
				}
			}
		}
		random_list = {
			10 = { custom_tooltip = robber_barons_spread_tt }
			90 = { custom_tooltip = robber_barons_stay_put_tt }
		}
		hidden_effect = {
			random_list = {
				90 = { }
				10 = {
					trigger_event_silently = turmoil_in_brandenburg.1301
				}
			}
		}
	}
}