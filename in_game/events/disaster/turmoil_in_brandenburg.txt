namespace = turmoil_in_brandenburg

scripted_trigger bra_ruled_by_wittelsbacher_trigger = {
	has_ruler = yes
	ruler.dynasty ?= dynasty:wittelsbach_dynasty
	government_type = government_type:monarchy
	is_member_of_international_organization = international_organization:hre
}

scripted_effect bra_change_investment_score = {
	custom_description = {
		text = bra_change_investment_score_$math$_text
		value = $value$
		change_variable = {
			name = bra_wittelsbacher_investment_var
			$math$ = $value$
		}
	}
}

scripted_effect bra_change_neglect_score = {
	custom_description = {
		text = bra_change_neglect_score_$math$_text
		value = $value$
		change_variable = {
			name = bra_wittelsbacher_neglect_var
			$math$ = $value$
		}
	}
}

scripted_effect bra_set_localization_scopes = {
	save_scope_as = root_country
	ruler_or_regent ?= { 
		save_scope_as = root_ruler 
		dynasty ?= { save_scope_as = root_dynasty }
	}
}

scripted_trigger bra_hre_emperor_favors_wittelsbacher = {
	emperor_exists = yes
	international_organization:hre = {
		leader_country ?= {
			opinion = {
				target = root
				value >= 100
			}
		}
	}
}

scripted_trigger bra_hre_emperor_favors_pretender = {
	international_organization:hre = {
		leader_country ?= {
			opinion = {
				target = root
				value < 0
			}
		}
	}
}

#The Wittelsbacher Situation
#Changed by mod
#Reduced control malus, removed legitimacy hit
turmoil_in_brandenburg.1 = {
	type = country_event
	category = disaster_event
	title = turmoil_in_brandenburg.1.title
	image = "gfx/interface/illustrations/disaster/turmoil_in_brandenburg.dds"
	
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = { ruler = character:bra_ludwig_v_wittelsbach }
				desc = turmoil_in_brandenburg.1.desc
			}
			triggered_desc = {
				desc = turmoil_in_brandenburg.1.desc.fallback
			}
		}
	}

	immediate = {
		bra_set_localization_scopes = yes
	}
	# Brandenburg will prevail!
	option = {
		name = turmoil_in_brandenburg.1.a
		historical_option = yes
		# add_country_modifier = { modifier = bra_wittelsbacher_neglect years = -1 mode = add_and_extend }
		custom_tooltip = {
			text = turmoil_in_brandenburg.1.a.at
			every_owned_location = {
				change_control = control_mild_penalty
			}
		}
		custom_tooltip = turmoil_in_brandenburg.1.a.bt
	}
}
#End of the Wittelsbacher Neglect (due to no longer having a Wittelsbacher anymore)
turmoil_in_brandenburg.2 = {
	type = country_event
	category = disaster_event
	title = turmoil_in_brandenburg.2.title
	image = "gfx/interface/illustrations/disaster/turmoil_in_brandenburg.dds"

	desc = turmoil_in_brandenburg.2.desc
	fire_only_once = yes
	trigger = {
		any_active_disaster = {
			disaster_type = disaster_type:turmoil_in_brandenburg
		}
		OR = {
			NOT = { government_type = government_type:monarchy }
			NOT = { is_member_of_international_organization = international_organization:hre }
			AND = {
				government_type = government_type:monarchy
				is_member_of_international_organization = international_organization:hre
				ruler_or_heir_if_regent ?= {
					OR = {
						has_dynasty = no
						NOT = { dynasty = dynasty:wittelsbach_dynasty }
					}
				}
			}
		}
	}
	immediate = {
	}
	option = {
		name = turmoil_in_brandenburg.2.a
		remove_country_modifier = bra_wittelsbacher_neglect
		if = {
			limit = { has_variable = bra_wittelsbacher_investment_var }
			remove_variable = bra_wittelsbacher_investment_var
		}
	}
}

#False Waldemar Revealed!
#Changed by mod
#Disabled.
turmoil_in_brandenburg.3 = {
	type = country_event
	category = disaster_event
	title = turmoil_in_brandenburg.3.title
	image = "gfx/interface/illustrations/disaster/turmoil_in_brandenburg.dds"

	desc = turmoil_in_brandenburg.3.desc
	fire_only_once = yes
	dynamic_historical_event = {
		tag = BRA
		from = 1300.1.1
		to = 1360.1.1
		monthly_chance = 0	#Intentionally very low chance to happen
	}
	trigger = {
		character:false_waldemar ?= {
			is_alive = yes
			owner = root
			has_character_modifier = bra_false_waldemar
		}
		has_country_modifier = bra_waldemar_rallies_nobility
		NOT = {
			has_variable = false_waldemar_imposter_protection
		}
	}
	immediate = {
		character:false_waldemar = { save_scope_as = target_character }
		random_rebel = {
			limit = { rebel_name_key = false_waldemar_rebel }
			save_scope_as = target_rebel
		}
		set_variable = { name = bra_false_waldemar_revealed value = yes }
		capital = {
			create_dynasty_from_location = random
			last_dynasty_in_location = { save_scope_as = target_dynasty }
		}
	}
	option = {
		name = turmoil_in_brandenburg.3.a
		scope:target_character = {
			change_dynasty = scope:target_dynasty
			change_character_estate = estate_type:burghers_estate
			every_descendant = {
				change_dynasty = scope:recipient.dynasty
				if = {
					limit = { has_estate = estate_type:nobles_estate }
					change_character_estate = estate_type:burghers_estate
				}
			}
			remove_character_modifier = bra_false_waldemar
		}
		if = {
			limit = { exists = scope:target_rebel }
			destroy_rebel = scope:target_rebel
		}
		remove_country_modifier = bra_waldemar_rallies_nobility
	}
}

#Robber Barons issues piling up
#Changed by mod
#Made the second option less severe, and increases neglect faster.
turmoil_in_brandenburg.4 = {
	type = country_event
	category = disaster_event
	title = turmoil_in_brandenburg.4.title
	image = "gfx/interface/illustrations/disaster/turmoil_in_brandenburg.dds"
	desc = turmoil_in_brandenburg.4.desc
	trigger = {
		any_active_disaster = {
			disaster_type = disaster_type:turmoil_in_brandenburg
		}
		has_variable = PRU_robber_barons_active
		any_owned_location = {
			local_control < 0.5
			is_connected_to = root.capital
		}
	}
	immediate = {
		random_owned_location = {
			limit = {
				local_control < 0.5
				is_connected_to = root.capital
			}
			save_scope_as = target_location
		}
	}
	#Combat the Robber Barons
	option = {
		name = turmoil_in_brandenburg.4.a
		bra_change_investment_score = { math = add value = 5 }
		add_estate_satisfaction = { type = estate_type:nobles_estate value = estate_satisfaction_mild_penalty }
		change_gold_effect = { scale = -2 }
		scope:target_location.province = {
			every_location_in_province = {
				change_control = control_severe_bonus
			}
		}
	}
	#That is not our issue
	option = {
		name = turmoil_in_brandenburg.4.b
		bra_change_neglect_score = { math = subtract value = 5 }
		add_estate_satisfaction = { type = estate_type:nobles_estate value = estate_satisfaction_weak_bonus }
		add_estate_satisfaction = { type = estate_type:burghers_estate value = estate_satisfaction_weak_penalty }
		add_estate_satisfaction = { type = estate_type:peasants_estate value = estate_satisfaction_weak_penalty }
	}
}

#Peasants Revolt
turmoil_in_brandenburg.5 = {
	hide_portraits = yes
	type = country_event
	category = disaster_event
	title = turmoil_in_brandenburg.5.title
	image = "gfx/interface/illustrations/disaster/turmoil_in_brandenburg.dds"
	desc = turmoil_in_brandenburg.5.desc
	#Support the Wittelsbacher
	trigger = {
		any_active_disaster = {
			disaster_type = disaster_type:turmoil_in_brandenburg
		}
		any_owned_location = {
			location_rank = location_rank:rural_settlement
			any_pop = {
				pop_type = pop_type:peasants
			}
		}
	}
	immediate = {
		
		if = {
			limit = {
				NOT = { any_rebel = { rebel_name_key = bra_peasants_revolt } }
			}
			create_rebel = {
				name = bra_peasants_revolt
				category = estate
				estate = peasants_estate
				save_scope_as = target_rebel
			}
		}
		else = {
			random_rebel = {
				limit = { rebel_name_key = bra_peasants_revolt }
				save_scope_as = target_rebel
			}
		}
		random_owned_location = {
			limit = {
				location_rank = location_rank:rural_settlement
				any_pop = {
					pop_type = pop_type:peasants
				}
			}
			save_scope_as = target_location
		}
	}
	option = {
		name = turmoil_in_brandenburg.5.a
		bra_change_investment_score = { math = add value = 2 }
		change_gold_effect = { scale = -3 }
		add_legitimacy = legitimacy_weak_bonus
		scope:target_location = {
			change_control = control_mild_penalty
			every_pop = {
				limit = {
					owner = root
					pop_type = pop_type:peasants
				}
				add_pop_satisfaction = pop_satisfaction_mild_bonus
			}
		}
	}
	#That is not our issue
	option = {
		name = turmoil_in_brandenburg.5.b
		bra_change_neglect_score = { math = subtract value = 5 }
		scope:target_location = {
			every_pop = {
				limit = {
					owner = root
					pop_type = pop_type:peasants
				}
				add_pop_satisfaction = pop_satisfaction_severe_penalty
				change_pop_allegiance = scope:target_rebel
			}
		}
	}
}

#Changed by mod
# Increased the neglect score increase
turmoil_in_brandenburg.6 = {
	type = country_event
	category = disaster_event
	title = turmoil_in_brandenburg.6.title
	image = "gfx/interface/illustrations/disaster/turmoil_in_brandenburg.dds"
	desc = turmoil_in_brandenburg.6.desc
	#Support the Wittelsbacher
	trigger = {
		any_active_disaster = {
			disaster_type = disaster_type:turmoil_in_brandenburg
		}
		NOT = { has_country_modifier = bra_revoked_clergy_power }
	}

	immediate = {
		
	}
	
	option = {
		name = turmoil_in_brandenburg.6.a
		bra_change_investment_score = { math = add value = 5 }
		add_stability = stability_weak_penalty
		add_estate_satisfaction = { type = estate_type:clergy_estate value = estate_satisfaction_mild_penalty }
		add_country_modifier = {
			modifier = bra_revoked_clergy_power
			years = 5
			mode = add_and_extend
		}
	}
	#That is not our issue
	option = {
		name = turmoil_in_brandenburg.6.b
		bra_change_neglect_score = { math = subtract value = 5 }
		add_estate_satisfaction = { type = estate_type:clergy_estate value = estate_satisfaction_mild_bonus }
		add_estate_satisfaction = { type = estate_type:burghers_estate value = estate_satisfaction_mild_penalty }
		add_estate_satisfaction = { type = estate_type:peasants_estate value = estate_satisfaction_weak_penalty }
	}
}

#City refuses to pay
turmoil_in_brandenburg.7 = {
	type = country_event
	category = disaster_event
	title = turmoil_in_brandenburg.7.title
	image = "gfx/interface/illustrations/disaster/turmoil_in_brandenburg.dds"
	desc = turmoil_in_brandenburg.7.desc
	#Support the Wittelsbacher
	trigger = {
		any_active_disaster = {
			disaster_type = disaster_type:turmoil_in_brandenburg
		}
		any_owned_location = {
			OR = {
				location_rank = location_rank:town
				location_rank = location_rank:city
			}
			any_pop = { pop_type = pop_type:burghers }
		}
	}

	immediate = {
		
		random_owned_location = {
			limit = {
				OR = {
					location_rank = location_rank:town
					location_rank = location_rank:city
				}
				any_pop = { pop_type = pop_type:burghers }
			}
			save_scope_as = target_location
		}
	}
	option = {
		name = turmoil_in_brandenburg.7.a
		bra_change_investment_score = { math = add value = 2 }
		add_legitimacy = legitimacy_weak_bonus
		add_estate_satisfaction = { type = estate_type:burghers_estate value = estate_satisfaction_mild_penalty }
		scope:target_location = {
			change_control = control_weak_bonus
		}
	}
	#That is not our issue
	option = {
		name = turmoil_in_brandenburg.7.b
		bra_change_neglect_score = { math = subtract value = 5 }
		add_estate_satisfaction = { type = estate_type:burghers_estate value = estate_satisfaction_weak_bonus }
		scope:target_location = {
			change_control = control_mild_penalty
		}
	}
}

turmoil_in_brandenburg.8 = {	#The Private Domain of <Noble Character>
	type = country_event
	category = disaster_event
	title = turmoil_in_brandenburg.8.title
	desc = turmoil_in_brandenburg.8.desc
	image = "gfx/interface/illustrations/disaster/turmoil_in_brandenburg.dds"
	trigger = {
		any_character = {
			is_ruler = no
			is_heir = no
			is_adult = yes
			is_regent = no
			has_estate = estate_type:nobles_estate
			has_dynasty = yes
			in_cabinet = no
			NOT = { has_variable = tib_character_variable_8 }
		}

		any_owned_location = {
			is_capital = no
			is_province_capital = yes
			province != root.capital.province
			NOT = { has_variable = tib_location_variable_8 }
		}
	}
	immediate = {
		random_character = {
			limit = {
				is_ruler = no
				is_heir = no
				is_adult = yes
				is_regent = no
				has_estate = estate_type:nobles_estate
				has_dynasty = yes
				in_cabinet = no
				NOT = { has_variable = tib_character_variable_8 }
			}

			save_scope_as = target_character

			set_variable = {
				name = tib_character_variable_8
				years = 10
			}
		}

		ordered_owned_location = {

			limit = {
				is_capital = no
				is_province_capital = yes
				province != root.capital.province
				NOT = { has_variable = tib_location_variable_8 }
			}
			order_by = {
				value = proximity
				multiply = -1
			}
			max = 10
			check_range_bounds = no
			add_to_list = tib_list_8
		}

		random_in_list = {
			list = tib_list_8

			province = { save_scope_as = target_province }
			
			save_scope_as = target_location

			set_variable = {
				name = tib_location_variable_8
				years = 10
			}
			
		}
	}
	option = {	#Tolerate it
		name = turmoil_in_brandenburg.8.a

		add_estate_satisfaction = {
			type = estate_type:nobles_estate
			value = estate_satisfaction_mild_bonus
		}

		scope:target_location = {
			add_location_modifier = {
				modifier = local_noble_stronghold_modifier
				years = modifier_duration_years_short
				mode = extend
			}
		}

		bra_change_neglect_score = { math = subtract value = 5 }
	}
	option = {	#Crush him
		name = turmoil_in_brandenburg.8.b


		random_list = {
			1 = {
				desc = tib_outcome_8_1_tt
				show_chance = no
				kill_character = {
					target = scope:target_character
					reason = assassination
				}
			}

			1 = {
				desc = tib_outcome_8_2_tt
				show_chance = no
				trigger = {
					scope:target_location = { 
						any_pop = { pop_type = pop_type:nobles }
					}
				}

				scope:target_location = {
					every_pop = {
						limit = {
							owner = root
							pop_type = pop_type:nobles
						}

						add_pop_satisfaction = pop_satisfaction_mild_penalty
					}
				}
			}

			1 = {
				desc = tib_outcome_8_3_tt
				show_chance = no
				add_estate_satisfaction = {
					type = estate_type:nobles_estate
					value = estate_satisfaction_weak_penalty
				}
			}
		}
	}
}

turmoil_in_brandenburg.9 = {	#The Noble League of <province>
	type = country_event
	category = disaster_event
	title = turmoil_in_brandenburg.9.title
	desc = turmoil_in_brandenburg.9.desc
	image = "gfx/interface/illustrations/disaster/turmoil_in_brandenburg.dds"
	trigger = {
		any_province = {
			NOT = {
				any_location_in_province = { is_capital = yes }
			}
			NOT = { has_province_modifier = crushed_local_noble_league_modifier }
			NOT = { has_variable = tib_province_variable_9 }
		}
	}
	immediate = {

		random_province = {
			limit = {
				NOT = {
					any_location_in_province = { is_capital = yes }
				}
				NOT = { has_province_modifier = crushed_local_noble_league_modifier }
				NOT = { has_variable = tib_province_variable_9 }
			}
			save_scope_as = target_province
			province_capital = { save_scope_as = target_location }

			set_variable = {
				name = tib_province_variable_9
				years = 5
			}
		}

		random_list = {
			1 = { set_variable = tib_variable_9_1 }
			1 = { set_variable = tib_variable_9_2 }
			1 = { set_variable = tib_variable_9_3 }
		}
	}
	option = {
		name = turmoil_in_brandenburg.9.a

		bra_change_neglect_score = { math = subtract value = 5 }

		if = {
			limit = {
				scope:target_province = {
					any_location_in_province = {
						any_pop = { 
							owner = root 
							pop_type = pop_type:nobles 
						}
					}
				}
			}

			custom_tooltip = {
				text = nobles_in_target_province_gain_pop_satisfaction_extreme_bonus_tt
				scope:target_province = {
					every_location_in_province = {
						every_pop = {
							limit = {
								owner = root 
								pop_type = pop_type:nobles 
							}
							add_pop_satisfaction = pop_satisfaction_extreme_bonus
						}
					}
				}
			}
		}

		switch = {
			trigger = has_variable

			tib_variable_9_1 = {
				scope:target_province = {
					every_location_in_province = { change_control = control_mild_penalty }
				}
			}
			tib_variable_9_2 = {
				scope:target_province = {
					every_location_in_province = { change_prosperity = prosperity_mild_penalty }
				}
			}
			tib_variable_9_3 = {
				custom_tooltip = {
					text = lower_class_pop_satisfaction_weak_penalty_tt

					scope:target_province = {
						every_location_in_province = {
							every_pop = {
								limit = {
									owner = root 
									is_upper_class = no
								}
								add_pop_satisfaction = pop_satisfaction_weak_penalty
							}
						}
					}
				}
			}
		}
	}
	option = {
		name = turmoil_in_brandenburg.9.b

		scope:target_province = {
			add_province_modifier = {
				modifier = crushed_local_noble_league_modifier
				mode = replace
				years = modifier_duration_years_normal
			}

			if = {
				limit = {
					any_location_in_province = { has_location_modifier = local_noble_stronghold_modifier }
				}
				every_location_in_province = {
					limit = { has_location_modifier = local_noble_stronghold_modifier }
					remove_location_modifier = local_noble_stronghold_modifier
				}
			}
		}

		custom_tooltip = nobles_in_target_province_may_agitate_locals_to_rebel_tt
	}

	after = {
		remove_variable = tib_variable_9_1
		remove_variable = tib_variable_9_2
		remove_variable = tib_variable_9_3
	}
}
#Changed by mod
# The second option is a powerful modifier, so the first should give a lot.
turmoil_in_brandenburg.10 = {	#Nobles Levy Illegal Tolls in <location>
	type = country_event
	category = disaster_event
	title = turmoil_in_brandenburg.10.title
	desc = turmoil_in_brandenburg.10.desc
	image = "gfx/interface/illustrations/disaster/turmoil_in_brandenburg.dds"
	trigger = {
		any_owned_location = {
			is_capital = no
			NOT = { has_variable = tib_location_variable_10 }
		}
	}
	immediate = {
		random_owned_location = {
			limit = { is_capital = no }

			save_scope_as = target_location

			set_variable = {
				name = tib_location_variable_10
				years = 5
			}
		}
	}
	option = {	#Let them
		name = turmoil_in_brandenburg.10.a

		add_estate_satisfaction = {
			type = estate_type:nobles_estate
			value = estate_satisfaction_severe_bonus
		}

		bra_change_neglect_score = { math = subtract value = 10 }

		scope:target_location = { change_control = control_extreme_penalty }
	}
	option = {
		name = turmoil_in_brandenburg.10.b

		add_estate_satisfaction = {
			type = estate_type:nobles_estate
			value = estate_satisfaction_severe_penalty
		}

		change_societal_value = {
			type = centralization_vs_decentralization
			value = societal_value_move_to_left
		}

		change_societal_value = {
			type = aristocracy_vs_plutocracy
			value = societal_value_move_to_right
		}
	}
}

turmoil_in_brandenburg.11 = {	#Noble Family Clashes With Our Dynasty
	type = country_event
	category = disaster_event
	title = turmoil_in_brandenburg.11.title
	desc = turmoil_in_brandenburg.11.desc
	image = "gfx/interface/illustrations/disaster/turmoil_in_brandenburg.dds"
	trigger = {

		ruler = {
			NOT = { has_character_modifier = noble_power_struggle_modifier }
		}
		any_character = {
			count > 0
			NOT = { has_variable = tib_variable_11 }
			has_dynasty = yes
			is_adult = yes
			is_heir = no

			trigger_if = {
				limit = {
					root = { has_ruler = yes }
					root.ruler = { has_dynasty = yes }
				}
				dynasty != root.ruler.dynasty
			}
		}
	}
	immediate = {
		random_character = {
			limit = {
				NOT = { has_variable = tib_variable_11 }
				has_dynasty = yes
				is_adult = yes
				is_heir = no

				trigger_if = {
					limit = {
						root = { has_ruler = yes }
						root.ruler = { has_dynasty = yes }
					}
					dynasty != root.ruler.dynasty
				}
			}

			set_variable = {
				name = tib_variable_11
				years = 5
			}

			save_scope_as = target_character_1
			dynasty = { save_scope_as = target_dynasty_1 }
		}

		ruler_or_regent = {
			save_scope_as = target_character_2

			dynasty = { save_scope_as = target_dynasty_2 }
		}
	}
	option = {	#Support our Ruler!
		name = turmoil_in_brandenburg.11.a

		scope:target_character_2 = {
			add_character_modifier = {
				modifier = noble_power_struggle_modifier
				years = -1
				mode = replace
			}
		}

		add_stability = stability_mild_penalty

		custom_tooltip = target_character_2_will_challenge_the_power_nobles_tt
	}
	option = {	#Give Concessions to the Noble Family
		name = turmoil_in_brandenburg.11.b

		bra_change_neglect_score = { math = subtract value = 5 }
		
		add_estate_satisfaction = {
			type = estate_type:nobles_estate
			value = estate_satisfaction_extreme_bonus
		}

		change_societal_value = {
			type = aristocracy_vs_plutocracy
			value = societal_value_move_to_left
		}
	}
}

turmoil_in_brandenburg.12 = {	#Investment in <location>
	type = country_event
	category = disaster_event
	title = turmoil_in_brandenburg.12.title
	desc = turmoil_in_brandenburg.12.desc
	image = "gfx/interface/illustrations/disaster/turmoil_in_brandenburg.dds"
	trigger = {
		any_province = {
			province_average_control > 0
			NOT = { 
				any_location_in_province = { is_capital = yes }
			}
			NOR = {
				has_province_modifier = crown_investments_modifier
				has_variable = tib_province_variable_12
			}
		}
	}
	immediate = {

		random_province = {
			limit = {
				province_average_control > 0
				NOT = { 
					any_location_in_province = { is_capital = yes }
				}
				NOR = {
					has_province_modifier = crown_investments_modifier
					has_variable = tib_province_variable_12
				}
			}

			set_variable = {
				name = tib_province_variable_12
				years = 5
			}

			save_scope_as = target_province

			province_capital = { save_scope_as = target_location }
		}
	}
	option = {	#It is worth an investment
		name = turmoil_in_brandenburg.12.a

		bra_change_investment_score = { math = add value = 5 }

		change_gold_effect = { scale = -1 }

		scope:target_province = {
			add_province_modifier = {
				modifier = crown_investments_modifier
				years = modifier_duration_years_normal
				mode = replace
			}
			if = {
				limit = {
					any_location_in_province = { has_location_modifier = local_noble_stronghold_modifier }
				}
				every_location_in_province = {
					limit = { has_location_modifier = local_noble_stronghold_modifier }
					remove_location_modifier = local_noble_stronghold_modifier
				}
			}
		}

		add_estate_satisfaction = {
			type = estate_type:nobles_estate
			value = estate_satisfaction_extreme_penalty
		}
	}
	option = {	#Delegate its development to the nobles
		name = turmoil_in_brandenburg.12.b

		bra_change_neglect_score = { math = subtract value = 5 }

		add_estate_satisfaction = {
			type = estate_type:nobles_estate
			value = estate_satisfaction_mild_bonus
		}
	}
}

turmoil_in_brandenburg.13 = {	#The Growth of <Location>
	type = country_event
	category = disaster_event
	title = turmoil_in_brandenburg.13.title
	desc = turmoil_in_brandenburg.13.desc
	image = "gfx/interface/illustrations/disaster/turmoil_in_brandenburg.dds"
	trigger = {
		at_war = no
		any_owned_location = {
			is_province_capital = yes 
			NOR = {
				has_location_modifier = center_of_urbanization_modifier
				has_location_modifier = flourishing_capital_modifier
				has_variable = tib_location_variable_13
			}
		}
	}
	immediate = {

		random_owned_location = {
			limit = {
				is_province_capital = yes 
				NOR = { 
					has_location_modifier = center_of_urbanization_modifier
					has_location_modifier = flourishing_capital_modifier
					has_variable = tib_location_variable_13
				}
			}


			set_variable = {
				name = tib_location_variable_13
				years = 5
			}
			save_scope_as = target_location
			province = { save_scope_as = target_province }
		}

		random_list = {
			1 = { set_variable = tib_variable_13_1 }
			1 = { set_variable = tib_variable_13_2 }
			1 = { set_variable = tib_variable_13_3 }
			1 = { set_variable = tib_variable_13_4 }
		}
	}
	option = {	#Spread the investment across [target_province.GetNameWithNoTooltip]!
		name = turmoil_in_brandenburg.13.a

		bra_change_investment_score = { math = add value = 10 }

		change_gold_effect = { scale = -4 }

		switch = {
			trigger = has_variable 

			tib_variable_13_1 = {
				custom_tooltip = {
					text = every_location_in_target_province_gains_center_of_urbanization_modifier_tt
					scope:target_province = {
						every_location_in_province = {
							add_location_modifier = {
								modifier = center_of_urbanization_modifier
								years = modifier_duration_years_normal
								mode = replace
							}
						}
					}
				}
			}
			tib_variable_13_2 = {
				custom_tooltip = {
					text = every_location_in_target_province_gains_flourishing_capital_modifier
					scope:target_province = {
						every_location_in_province = {
							add_location_modifier = {
								modifier = flourishing_capital_modifier
								years = modifier_duration_years_normal
								mode = replace
							}
						}
					}
				}
			}
			tib_variable_13_3 = {
				custom_tooltip = {
					text = every_location_in_target_province_gains_development_mild_bonus
					scope:target_province = {
						every_location_in_province = { change_development = development_mild_bonus }
					}
				}
			}
			tib_variable_13_4 = {
				custom_tooltip = {
					text = every_location_in_target_province_gains_prosperity_extreme_bonus
					scope:target_province = {
						every_location_in_province = { change_prosperity = prosperity_extreme_bonus }	
					}
				}
			}
		}
	}

	option = {	#Concentrate on [target_location.GetNameWithNoTooltip]!
		name = turmoil_in_brandenburg.13.b

		bra_change_investment_score = { math = add value = 5 }

		change_gold_effect = { scale = -2 }

		switch = {
			trigger = has_variable 

			tib_variable_13_1 = {
				scope:target_location = {
					add_location_modifier = {
						modifier = center_of_urbanization_modifier
						years = modifier_duration_years_normal
						mode = replace
					}
				}
			}
			tib_variable_13_2 = {
				scope:target_location = {
					add_location_modifier = {
						modifier = flourishing_capital_modifier
						years = modifier_duration_years_normal
						mode = replace
					}
				}
			}
			tib_variable_13_3 = {
				scope:target_location = {
					change_development = development_mild_bonus
				}
			}
			tib_variable_13_4 = {
				scope:target_location = {
					change_prosperity = prosperity_extreme_bonus
				}
			}
		}
	}

	option = {	#We cannot afford this.
		name = turmoil_in_brandenburg.13.c

		bra_change_neglect_score = { math = subtract value = 5 }
	}

	after = {
		remove_variable = tib_variable_13_1
		remove_variable = tib_variable_13_2
		remove_variable = tib_variable_13_3
		remove_variable = tib_variable_13_4
	}
}

#Wittelsbacher revitalizes Brandenburg
turmoil_in_brandenburg.100 = {
	type = country_event
	category = disaster_event
	title = turmoil_in_brandenburg.100.title
	image = "gfx/interface/illustrations/disaster/turmoil_in_brandenburg.dds"
	desc = turmoil_in_brandenburg.100.desc
	fire_only_once = yes
	dynamic_historical_event = {
		tag = BRA
		from = 1300.1.1
		to = 1800.1.1
		monthly_chance = 100
	}
	trigger = {
		has_ruler = yes
		any_active_disaster = {
			disaster_type = disaster_type:turmoil_in_brandenburg
		}
		has_variable = bra_wittelsbacher_investment_var
		var:bra_wittelsbacher_investment_var >= 50
	}
	immediate = {
		ruler ?= {
			save_scope_as = target_character
		}
	}
	#Brandenburg shall become the pride of the Wittelsbacher
	option = {
		name = turmoil_in_brandenburg.100.a

		set_variable = unlock_achievement_ill_be_wittelsback
		remove_country_modifier = bra_wittelsbacher_neglect
		remove_variable = bra_wittelsbacher_investment_var
		remove_variable = bra_wittelsbacher_neglect_var
		add_legitimacy = legitimacy_severe_bonus
		add_prestige = prestige_severe_bonus
		add_stability = stability_ultimate_bonus
		trigger_event_silently = { id = turmoil_in_brandenburg.1105 days = 3 }
	}
}

#Premature death of the False Waldemar
turmoil_in_brandenburg.200 = { #GRAVEYARD
	type = country_event
	category = disaster_event
	title = turmoil_in_brandenburg.200.title
	image = "gfx/interface/illustrations/disaster/turmoil_in_brandenburg.dds"
	desc = turmoil_in_brandenburg.200.desc
	fire_only_once = yes
	trigger = {
		has_variable = bra_fake_waldemar_on_throne
		exists = character:false_waldemar
		character:false_waldemar = {
			is_alive = no
		}
	}
	immediate = {
		remove_variable = bra_fake_waldemar_on_throne
		character:false_waldemar = {
			save_scope_as = target_character
		}
	}
	option = {
		name = turmoil_in_brandenburg.200.a
		add_prestige = prestige_severe_penalty
		scope:target_character = {
			every_descendant =  {
				limit = { dynasty = prev.dynasty }
				set_lowborn = yes
			}
			set_lowborn = yes
		}
	}
}


#EVENT CHAINS

#The False Waldemar
turmoil_in_brandenburg.1000 = {
	type = country_event
	category = disaster_event
	title = turmoil_in_brandenburg.1000.title
	image = "gfx/interface/illustrations/disaster/turmoil_in_brandenburg.dds"
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = { bra_hre_emperor_favors_wittelsbacher = yes }
				desc = turmoil_in_brandenburg.1000.desc.emperor_supports
			}
			triggered_desc = {
				desc = turmoil_in_brandenburg.1000.desc.emperor_rejects
			}
		}
	}
	fire_only_once = yes
	dynamic_historical_event = {
		tag = BRA
		from = 1300.1.1
		to = 1360.1.1
		monthly_chance = 5
	}
	trigger = {
		bra_ruled_by_wittelsbacher_trigger = yes
	}
	immediate = {
		location:ballenstedt = { create_dynasty_from_location = fake_askanier_dynasty }
		create_character = {
			first_name = name_waldemar
			dynasty = dynasty:fake_askanier_dynasty
			estate = estate_type:nobles_estate
			adm = 12
			dip = 60
			mil = 45
			birth_date = 1280
			script = false_waldemar
			save_scope_as = target_character
		}
		scope:target_character = {
			add_character_modifier = { modifier = bra_false_waldemar days = -1 }
		}
		set_variable = {
			name = false_waldemar_imposter_protection
			value = yes
			years = 2

		}
		ruler = { save_scope_as = bra_ruler }
		create_rebel = {
			category = pretender
			name = false_waldemar_rebel
			save_scope_as = false_waldemar_rebel
		}
	}
	# Contact the Emperor!
	option = {
		name = turmoil_in_brandenburg.1000.a
		historical_option = yes
		custom_tooltip = {
			text = turmoil_in_brandenburg.1000.a.at
			dynasty:wittelsbach_dynasty = {
				every_country_in_dynasty = {
					limit = { this != root }
					add_opinion = {
						target = root
						modifier = opinion_support_our_dynasty_member
					}
				}
			}
		}
		add_stability = stability_mild_penalty
		add_country_modifier = {
			modifier = bra_waldemar_rallies_nobility
			years = 20
			mode = add_and_extend
			size = {
				value = 1
				multiply = 1
			}
		}
		trigger_event_silently = { id = turmoil_in_brandenburg.1004 days = 30 }
		scope:target_character = {
			change_character_allegiance = scope:false_waldemar_rebel
		}
		custom_tooltip = {
			text = turmoil_in_brandenburg.false_waldemar_rebel.tt
			ordered_owned_location = {
				order_by = population
				max = 4
				check_range_bounds = no
				every_pop = {
					limit = {
						owner = root
						pop_type = pop_type:nobles
					}
					add_pop_satisfaction = pop_satisfaction_ultimate_penalty
					change_pop_allegiance = scope:false_waldemar_rebel
				}
			}
		}
	}
	# Execute this pretender!
	option = {
		name = turmoil_in_brandenburg.1000.b
		add_legitimacy = legitimacy_severe_penalty
		hidden_effect = {
			set_variable = { name = bra_executing_false_waldemar value = random_integer }
			change_variable = { name = bra_executing_false_waldemar modulo = 5 }
			destroy_rebel = scope:false_waldemar_rebel
			trigger_event_silently = { id = turmoil_in_brandenburg.1007 days = 7 }
		}
	}
	# Abdicate to the true ruler.
	option = {
		name = turmoil_in_brandenburg.1000.c
		add_stability = stability_radical_penalty
		set_new_ruler = scope:target_character
		custom_tooltip = {
			text = turmoil_in_brandenburg.1000.c.at
			dynasty:wittelsbach_dynasty = {
				every_country_in_dynasty = {
					limit = { this != root }
					add_opinion = {
						target = root
						modifier = opinion_ousted_our_dynasty_member
					}
				}
			}
		}
		scope:target_character = {
			add_character_modifier = { modifier = bra_waldemar_on_the_throne years = -1 mode = add_and_extend }
		}
		bra_change_neglect_score = { math = subtract value = 5 }
		hidden_effect = {
			set_variable = { name = bra_fake_waldemar_on_throne value = yes }
			set_variable = { name = bra_blocked_from_hohenzoller_event value = yes }
			remove_variable = bra_wittelsbacher_investment_var
			trigger_event_silently = { id = turmoil_in_brandenburg.1005 years = 1 }
			scope:target_character = {
				remove_character_modifier = bra_false_waldemar
			}
		}
	}
}

#Brandenburg turns to the Emperor for help
turmoil_in_brandenburg.1001 = {
	type = country_event
	category = disaster_event
	title = turmoil_in_brandenburg.1001.title
	image = "gfx/interface/illustrations/disaster/turmoil_in_brandenburg.dds"
	trigger = { always = no }
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:bra_country = { has_variable = bra_false_waldemar_revealed }
				}
				desc = turmoil_in_brandenburg.1001.desc.imposter_revealed
			}
			triggered_desc = {
				trigger = {
					scope:bra_country = { NOT = { has_variable = bra_false_waldemar_revealed } }
				}
				desc = turmoil_in_brandenburg.1001.desc
			}
		}
	}
	trigger = {
		exists = character:false_waldemar
		character:false_waldemar = { is_alive = yes }
	}
	immediate = {
		character:false_waldemar = { save_scope_as = target_character }
		set_variable = {
			name = bra_gold_tooltip_var
			value = {
				value = scope:bra_country.monthly_income_trade_and_tax
				multiply = 18
			}
		}
	}
	after = {
		remove_variable = bra_gold_tooltip_var
	}
	#Support the Wittelsbacher in exchange for Gold
	option = {
		name = turmoil_in_brandenburg.1001.a
		trigger = {
			scope:bra_country = { NOT = { has_variable = bra_false_waldemar_revealed } }
			opinion = {
				target = scope:bra_country
				value < 100
			}
		}
		custom_tooltip = {
			text = turmoil_in_brandenburg.1001.help.tt
			scope:bra_country = {
				trigger_event_silently = { id = turmoil_in_brandenburg.1002 years = 1 }
			}
		}
		custom_tooltip = {
			text = turmoil_in_brandenburg.1001.a.tt
			scope:bra_country = { set_variable = { name = bra_owes_gold value = root.var:bra_gold_tooltip_var } }
		}
	}
	#Support the Wittelsbacher in exchange for their Loyalty
	option = {
		name = turmoil_in_brandenburg.1001.b
		historical_option = yes
		trigger = {
			scope:bra_country = {
				NOT = { has_variable = bra_false_waldemar_revealed }
				has_special_status_in_international_organization = {
					type = special_status:elector
					international_organization = international_organization:hre
				}
			}
			opinion = {
				target = scope:bra_country
				value < 100
			}
		}
		custom_tooltip = {
			text = turmoil_in_brandenburg.1001.help.tt
			scope:bra_country = {
				trigger_event_silently = { id = turmoil_in_brandenburg.1002 years = 1 }
			}
		}
		custom_tooltip = {
			text = turmoil_in_brandenburg.1001.b.tt
			scope:bra_country = { set_variable = { name = bra_owes_loyalty value = yes } }
		}
	}
	#Support the Wittelsbacher in exchange for Dynasty opinion
	option = {
		name = turmoil_in_brandenburg.1001.c
		trigger = {
			scope:bra_country = { NOT = { has_variable = bra_false_waldemar_revealed } }
			opinion = {
				target = scope:bra_country
				value < 100
			}
		}
		custom_tooltip = {
			text = turmoil_in_brandenburg.1001.help.tt
			scope:bra_country = {
				trigger_event_silently = { id = turmoil_in_brandenburg.1002 years = 1 }
			}
		}
		custom_tooltip = {
			text = turmoil_in_brandenburg.1001.c.tt
			scope:bra_country = { set_variable = { name = bra_owes_relations value = yes } }
		}
	}
	#Support the Wittelsbacher for free
	option = {
		name = turmoil_in_brandenburg.1001.d
		trigger = {
			scope:bra_country = { NOT = { has_variable = bra_false_waldemar_revealed } }
		}
		custom_tooltip = turmoil_in_brandenburg.1001.d.tt
		custom_tooltip = {
			text = turmoil_in_brandenburg.1001.help.tt
			scope:bra_country = {
				set_variable = { name = bra_free_support value = yes }
				trigger_event_silently = { id = turmoil_in_brandenburg.1002 years = 1 }
			}
		}
	}
	#That is not our issue
	option = {
		name = turmoil_in_brandenburg.1001.e
		trigger = {
			scope:bra_country = { NOT = { has_variable = bra_false_waldemar_revealed } }
			opinion = {
				target = scope:bra_country
				value < 0
			}
		}
		custom_tooltip = {
			text = turmoil_in_brandenburg.1001.e.tt
			scope:bra_country = {
				trigger_event_silently = { id = turmoil_in_brandenburg.1003 years = 1 }
			}
		}
	}
	#They shall be allowed to do whatever they please
	option = {
		name = turmoil_in_brandenburg.1001.zzz
		trigger = {
			scope:bra_country = { has_variable = bra_false_waldemar_revealed }
		}
		custom_tooltip = {
			text = turmoil_in_brandenburg.1001.zzz.tt
			scope:bra_country = {
				trigger_event_silently = { id = turmoil_in_brandenburg.1004 years = 1 }
			}
		}
		add_prestige = prestige_mild_bonus
	}
}

#The Emperor supports us!
turmoil_in_brandenburg.1002 = {
	type = country_event
	category = disaster_event
	title = turmoil_in_brandenburg.1002.title
	image = "gfx/interface/illustrations/disaster/turmoil_in_brandenburg.dds"
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = { has_variable = bra_owes_gold }
				desc = turmoil_in_brandenburg.1002.desc.gold
			}
			triggered_desc = {
				trigger = { has_variable = bra_owes_loyalty }
				desc = turmoil_in_brandenburg.1002.desc.loyalty
			}
			triggered_desc = {
				trigger = { has_variable = bra_owes_relations }
				desc = turmoil_in_brandenburg.1002.desc.relations
			}
			triggered_desc = {
				trigger = { has_variable = bra_free_support }
				desc = turmoil_in_brandenburg.1002.desc.free
			}
			triggered_desc = {
				desc = turmoil_in_brandenburg.1002.desc
			}
		}
	}
	trigger = {
		exists = character:false_waldemar
		character:false_waldemar = { is_alive = yes }
	}
	immediate = {
		character:false_waldemar = { save_scope_as = target_character }
		random_rebel = {
			limit = { rebel_name_key = false_waldemar_rebel }
			save_scope_as = target_rebel
		}
	}
	#Excellent
	option = {
		name = turmoil_in_brandenburg.1002.a
		if = {
			limit = { has_variable = bra_owes_gold }
			add_gold = { value = var:bra_owes_gold multiply = -1 }
			scope:emperor_country = { add_gold = { value = root.var:bra_owes_gold } }
		}
		if = {
			limit = { has_variable = bra_owes_loyalty }
			add_legitimacy = legitimacy_mild_penalty
			international_organization:hre = {
				set_vote = {
					voter = prev
					resolution = resolution:hre_election
					vote = scope:emperor_country
					lock_reason = {
						key = VOTE_LOCK_REASON_SUPPORT
						emperor = scope:emperor_country
					}
				}
			}
		}
		if = {
			limit = { has_variable = bra_owes_relations }
			add_prestige = prestige_severe_penalty
			custom_tooltip = {
				text = turmoil_in_brandenburg.1002.a.tt
				scope:emperor_country = {
					dynasty:wittelsbach_dynasty = {
						every_country_in_dynasty = {
							add_opinion = {
								target = scope:emperor_country
								modifier = opinion_supported_the_wittelsbacher
							}
						}
					}
				}
			}
		}
		if = {
			limit = { has_variable = bra_free_support }
			add_opinion = {
				target = scope:emperor_country
				modifier = opinion_emperors_genorisity
			}
		}
		scope:target_character = {
			banish_character = yes
		}
		bra_change_investment_score = { math = add value = 5 }
		if = {
			limit = { exists = scope:target_rebel }
			destroy_rebel = scope:target_rebel
		}
		remove_country_modifier = bra_waldemar_rallies_nobility
	}
	after = {
		if = { limit = { has_variable = bra_owes_gold } remove_variable = bra_owes_gold }
		if = { limit = { has_variable = bra_owes_loyalty } remove_variable = bra_owes_loyalty }
		if = { limit = { has_variable = bra_owes_relations } remove_variable = bra_owes_relations }
		if = { limit = { has_variable = bra_free_support } remove_variable = bra_free_support }
	}
}

#No support from the Emperor...
turmoil_in_brandenburg.1003 = {
	type = country_event
	category = disaster_event
	title = turmoil_in_brandenburg.1003.title
	image = "gfx/interface/illustrations/disaster/turmoil_in_brandenburg.dds"

	illustration_tags = {
		10 = exterior
		10 = armed
	}
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:emperor_ruler = { is_alive = no }
				}
				desc = turmoil_in_brandenburg.1003.desc.dead
			}
			triggered_desc = {
				trigger = {
					scope:emperor_ruler = { dynasty = dynasty:wittelsbach_dynasty }
				}
				desc = turmoil_in_brandenburg.1003.desc.wittelsbach
			}
			triggered_desc = {
				trigger = {
					scope:emperor_ruler = { NOT = { dynasty = dynasty:wittelsbach_dynasty } }
				}
				desc = turmoil_in_brandenburg.1003.desc
			}
		}
	}
	trigger = {
		exists = character:false_waldemar
		character:false_waldemar = { is_alive = yes }
	}
	immediate = {
		character:false_waldemar = { save_scope_as = target_character }
	}
	#These are bad news indeed...
	option = {
		name = turmoil_in_brandenburg.1003.a
		add_stability = stability_severe_penalty
		custom_tooltip = {
			text = turmoil_in_brandenburg.1003.a.tt
			dynasty:wittelsbach_dynasty ?= {
				every_country_in_dynasty = {
					add_opinion = {
						target = scope:emperor_country
						modifier = opinion_rejected_helping_wittelsbacher
					}
				}
			}
			dynasty:askanier_dynasty ?= {
				every_country_in_dynasty = {
					add_opinion = {
						target = scope:emperor_country
						modifier = opinion_rejected_helping_wittelsbacher_askanier
					}
				}
			}
		}
	}
}

#Full support from the Emperor (for free!)
turmoil_in_brandenburg.1004 = { #PRISON
	type = country_event
	category = disaster_event
	title = turmoil_in_brandenburg.1004.title
	image = "gfx/interface/illustrations/disaster/turmoil_in_brandenburg.dds"

	illustration_tags = {
		10 = exterior
		10 = happy
	}
	desc = turmoil_in_brandenburg.1004.desc
	trigger = {
		exists = character:false_waldemar
		character:false_waldemar = { is_alive = yes }
	}
	immediate = {
		character:false_waldemar = { save_scope_as = target_character }
	}
	#Banish [target_character.GetHimHer].
	option = {
		name = turmoil_in_brandenburg.1004.a
		scope:target_character = {
			banish_character = yes
		}
		bra_change_investment_score = { math = add value = 5 }
	}
	#Execute [target_character.GetHimHer].
	option = {
		name = turmoil_in_brandenburg.1004.b
		kill_character = {
			target = scope:target_character
			reason = execution
			killer = ruler
		}
		bra_change_investment_score = { math = add value = 3 }
		add_legitimacy = legitimacy_mild_bonus
	}
	#[target_character.GetHisHer|U] abilities might actually come in handy to us...
	option = {
		name = turmoil_in_brandenburg.1004.c
		scope:target_character = {
			remove_character_allegiance = yes
			move_country = root
			add_dip = 30
			if = {
				limit = { has_character_modifier = bra_false_waldemar }
				remove_character_modifier = bra_false_waldemar
			}
		}
		add_legitimacy = legitimacy_severe_penalty
	}
}

#Questionable Authenticity
turmoil_in_brandenburg.1005 = {
	type = country_event
	category = disaster_event
	title = turmoil_in_brandenburg.1005.title
	image = "gfx/interface/illustrations/disaster/turmoil_in_brandenburg.dds"
	desc = turmoil_in_brandenburg.1005.desc

	trigger = {
		has_variable = bra_fake_waldemar_on_throne
		character:false_waldemar = { is_alive = yes }
	}

	immediate = {
	}

	#Research our ruler's backstory
	option = {
		name = turmoil_in_brandenburg.1005.a
		custom_tooltip = {
			text = turmoil_in_brandenburg.1005.a.tt
			trigger_event_silently = { id = turmoil_in_brandenburg.1006 years = 2 }
		}
	}
	#These are just unjustified rumors...
	option = {
		name = turmoil_in_brandenburg.1005.b
		scope:target_character = {
			remove_character_modifier = bra_waldemar_on_the_throne
			add_character_modifier = { modifier = bra_suspicious_waldemar_on_throne years = -1 mode = add_and_extend }
		}
	}
}

#Question of Authenticity
turmoil_in_brandenburg.1006 = {
	type = country_event
	category = disaster_event
	title = turmoil_in_brandenburg.1006.title
	image = "gfx/interface/illustrations/disaster/turmoil_in_brandenburg.dds"
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = { has_variable = bra_true_askanier }
				desc = turmoil_in_brandenburg.1006.desc.true_askanier
			}
			triggered_desc = {
				desc = turmoil_in_brandenburg.1006.desc.false_askanier
			}
		}
	}
	trigger = {
		has_variable = bra_fake_waldemar_on_throne
		character:false_waldemar = { is_alive = yes }
	}
	immediate = {
		random_list = {
			1 = { set_variable = { name = bra_true_askanier value = yes } }
			9 = {}
		}
		random_owned_location = {
			create_dynasty_from_location = random
			last_dynasty_in_location = { save_scope_as = target_dynasty }
		}
		character:false_waldemar ?= {
			save_scope_as = target_character
		}
		remove_variable = bra_fake_waldemar_on_throne
	}
	#He is the real Askanier!
	option = {
		name = turmoil_in_brandenburg.1006.a
		trigger = { has_variable = bra_true_askanier }
		custom_tooltip = {
			text = turmoil_in_brandenburg.1006.a.tt
			scope:target_character = {
				change_dynasty = dynasty:askanier_dynasty
				every_descendant = {
					change_dynasty = scope:recipient.dynasty
				}
			}
		}
		scope:target_character = {
			if = {
				limit = { has_character_modifier = bra_false_waldemar }
				remove_character_modifier = bra_false_waldemar
			}
			remove_character_modifier = bra_waldemar_on_the_throne
			add_character_modifier = {
				modifier = bra_true_askanier_on_the_throne
				years = -1
				mode = add_and_extend
			}
		}
	}
	#As long he is not a Wittelsbacher
	option = {
		name = turmoil_in_brandenburg.1006.b
		trigger = { NOT = { has_variable = bra_true_askanier } }
		custom_tooltip = {
			text = turmoil_in_brandenburg.1006.b.tt
			scope:target_character = {
				change_dynasty = scope:target_dynasty
				every_descendant = {
					change_dynasty = scope:recipient.dynasty
				}
			}
		}
		scope:target_character = {
			remove_character_modifier = bra_waldemar_on_the_throne
			add_character_modifier = {
				modifier = bra_imposter_dynasty_on_throne
				years = -1
				mode = add_and_extend
			}
		}
	}
	#Remove him and all other imposters!
	option = {
		name = turmoil_in_brandenburg.1006.c
		trigger = { NOT = { has_variable = bra_true_askanier } }
		custom_tooltip = {
			text = turmoil_in_brandenburg.1006.b.tt
			scope:target_character = {
				banish_character = yes
				every_descendant = {
					limit = { owner = root }
					banish_character = yes
				}
			}
		}
		scope:target_character = { banish_character = yes }
		add_stability = stability_ultimate_penalty
	}
}

#Execution of the False Waldemar
turmoil_in_brandenburg.1007 = { #PRISON #GRAVEYARD
	type = country_event
	category = disaster_event
	title = turmoil_in_brandenburg.1007.title
	image = "gfx/interface/illustrations/disaster/turmoil_in_brandenburg.dds"
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = { has_variable = bra_execution_successful }
				desc = turmoil_in_brandenburg.1007.desc.successful_execution
			}
			triggered_desc = {
				desc = turmoil_in_brandenburg.1007.desc.failed_execution
			}
		}
	}

	immediate = {
		if = {
			limit = { var:bra_executing_false_waldemar = 0 }
			set_variable = { name = bra_execution_successful value = yes }
		}
		else = {
			create_rebel = {
				category = pretender
				name = false_waldemar_rebel
				save_scope_as = false_waldemar_rebel
			}
		}
		set_variable = { name = bra_true_askanier_maker value = random_integer }
		change_variable = { name = bra_true_askanier_maker modulo = 10 }
		random_owned_location = {
			create_dynasty_from_location = random
			last_dynasty_in_location = { save_scope_as = target_dynasty }
		}
	}
	after = {
		remove_variable = bra_executing_false_waldemar
		remove_variable = bra_execution_successful
		remove_variable = bra_true_askanier_maker
	}
	#Our Authority is finally restored!
	option = {
		name = turmoil_in_brandenburg.1007.a
		trigger = { has_variable = bra_execution_successful }
		kill_character = {
			target = scope:target_character
			reason = execution
			killer = ruler
		}
		hidden_effect = {	#Nobody should walk with the 'Askanier' dynasty around...
			scope:target_character = {
				change_dynasty = scope:target_dynasty
				change_character_estate = estate_type:burghers_estate
				every_descendant = {
					change_dynasty = scope:recipient.dynasty
					if = {
						limit = { has_estate = estate_type:nobles_estate }
						change_character_estate = estate_type:burghers_estate
					}
				}
			}
		}
	}
	#To Arms!
	option = {
		name = turmoil_in_brandenburg.1007.b
		add_stability = stability_severe_penalty
		trigger = { NOT = { has_variable = bra_execution_successful } }
		hidden_effect = {
			if = {
				limit = { var:bra_true_askanier_maker = 0 }
				scope:target_character = {
					change_dynasty = dynasty:askanier_dynasty
					every_descendant = {
						change_dynasty = scope:recipient.dynasty
					}
				}
			}
			else = {
				scope:target_character = {
					change_dynasty = scope:target_dynasty
					every_descendant = {
						change_dynasty = scope:recipient.dynasty
					}
				}
			}
			scope:target_character = { remove_character_modifier = bra_false_waldemar }
		}
		scope:target_character = {
			change_character_allegiance = scope:false_waldemar_rebel
		}
		custom_tooltip = {
			text = turmoil_in_brandenburg.false_waldemar_big_rebel.tt
			ordered_owned_location = {
				order_by = population
				max = 20
				check_range_bounds = no
				every_pop = {
					limit = {
						owner = root
						pop_type = pop_type:nobles
					}
					add_pop_satisfaction = pop_satisfaction_ultimate_penalty
					change_pop_allegiance = scope:false_waldemar_rebel
				}
			}
		}
		scope:false_waldemar_rebel = {
			add_rebel_progress = 1
		}
		custom_tooltip = bra_true_waldemar_identity_reveal_tt
	}
}

#Wittelsbacher neglect Brandenburg too much #DEVASTATION?
turmoil_in_brandenburg.1100 = {
	type = country_event
	category = disaster_event
	title = turmoil_in_brandenburg.1100.title
	image = "gfx/interface/illustrations/disaster/turmoil_in_brandenburg.dds"
	desc = turmoil_in_brandenburg.1100.desc
	fire_only_once = yes
	dynamic_historical_event = {
		tag = BRA
		from = 1300.1.1
		to = 1800.1.1
		monthly_chance = 100
	}
	trigger = {
		has_ruler = yes
		any_active_disaster = {
			disaster_type = disaster_type:turmoil_in_brandenburg
		}
		has_variable = bra_wittelsbacher_neglect_var
		var:bra_wittelsbacher_neglect_var <= -50
	}
	immediate = {
		bra_set_localization_scopes = yes
	}
	#The Emperor will be quite disgruntled...
	option = {
		name = turmoil_in_brandenburg.1100.a

		#set_Variable = bra_wittelsbacher_investment_resolved
		remove_variable = bra_wittelsbacher_investment_var
		remove_variable = bra_wittelsbacher_neglect_var
		trigger_event_silently = { id = turmoil_in_brandenburg.1105 days = 3 }
	}
}
#Changed by mod
# The emperor can only put a Hohenzoller on the throne now
#The Wittelsbacher fail the Holy Roman Empire  #DEVASTATION
turmoil_in_brandenburg.1101 = {
	type = country_event
	category = disaster_event
	title = turmoil_in_brandenburg.1101.title
	image = "gfx/interface/illustrations/disaster/turmoil_in_brandenburg.dds"
	desc = turmoil_in_brandenburg.1101.desc
	trigger = { always = no }
	immediate = {
		ruler ?= {
			save_scope_as = emperor_ruler
			dynasty = {
				random_character_in_dynasty = {
					limit = {
						is_alive = yes
						is_female = no
						is_adult = yes
						is_ruler = no
						owner = root
					}
					save_scope_as = dynasty_character
				}
			}
		}
		ordered_cabinet_character = {
			order_by = total_abilities
			max = 1
			check_range_bounds = no
			save_scope_as = cabinet_character
		}
	}
	option = {
		name = turmoil_in_brandenburg.1101.d
		custom_tooltip = {
			text = turmoil_in_brandenburg.1101.d.tt
			scope:root_country = { trigger_event_silently = { id = turmoil_in_brandenburg.1105 days = 5 } }
		}
		change_imperial_authority = { value = imperial_authority_extreme_bonus }
		add_prestige = prestige_severe_bonus
	}
}

#PU Event
turmoil_in_brandenburg.1102 = {
	type = country_event
	category = disaster_event
	title = turmoil_in_brandenburg.1102.title
	image = "gfx/interface/illustrations/disaster/turmoil_in_brandenburg.dds"
	trigger = { always = no }
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = { scope:emperor_ruler = { dynasty = dynasty:wittelsbach_dynasty } }
				desc = turmoil_in_brandenburg.1102.desc.wittelsbach
			}
		}
		first_valid = {
			triggered_desc = {
				trigger = { scope:emperor_ruler = { NOT = { dynasty = dynasty:wittelsbach_dynasty } } }
				desc = turmoil_in_brandenburg.1102.desc
			}
		}
	}
	immediate = {
	}
	option = {
		name = turmoil_in_brandenburg.1102.a
		trigger = { scope:emperor_ruler = { dynasty = dynasty:wittelsbach_dynasty } }
		set_new_ruler = scope:emperor_ruler
		scope:emperor_ruler = { add_character_modifier = { modifier = bra_fresh_emperor_ruler_of_brandenburg years = -1 mode = add_and_extend } }
		add_stability = stability_mild_bonus
		remove_country_modifier = bra_wittelsbacher_neglect
		remove_variable = bra_wittelsbacher_investment_var
	}
	option = {
		name = turmoil_in_brandenburg.1102.b
		trigger = { scope:emperor_ruler = { NOT = { dynasty = dynasty:wittelsbach_dynasty } } }
		set_new_ruler = scope:emperor_ruler
		scope:emperor_ruler = { add_character_modifier = { modifier = bra_fresh_emperor_ruler_of_brandenburg years = -1 mode = add_and_extend } }
		add_stability = stability_mild_bonus
		remove_country_modifier = bra_wittelsbacher_neglect
		remove_variable = bra_wittelsbacher_investment_var
	}
}

#Dynasty gets the country event
turmoil_in_brandenburg.1103 = {
	type = country_event
	category = disaster_event
	title = turmoil_in_brandenburg.1103.title
	image = "gfx/interface/illustrations/disaster/turmoil_in_brandenburg.dds"
	trigger = { always = no }
	
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = { scope:dynasty_character = { dynasty = dynasty:wittelsbach_dynasty } }
				desc = turmoil_in_brandenburg.1103.desc.wittelsbach
			}
		}
		first_valid = {
			triggered_desc = {
				trigger = { scope:dynasty_character = { NOT = { dynasty = dynasty:wittelsbach_dynasty } } }
				desc = turmoil_in_brandenburg.1103.desc
			}
		}
	}

	immediate = {
	}

	option = {
		name = turmoil_in_brandenburg.1103.a
		trigger = { scope:dynasty_character = { dynasty = dynasty:wittelsbach_dynasty } }
		set_new_ruler = scope:dynasty_character
		scope:dynasty_character = { add_character_modifier = { modifier = bra_fresh_ruler_of_brandenburg years = -1 mode = add_and_extend } }
		add_stability = stability_mild_bonus
		remove_country_modifier = bra_wittelsbacher_neglect
		remove_variable = bra_wittelsbacher_investment_var
	}
	option = {
		name = turmoil_in_brandenburg.1103.b
		trigger = { scope:dynasty_character = { NOT = { dynasty = dynasty:wittelsbach_dynasty } } }
		set_new_ruler = scope:dynasty_character
		scope:dynasty_character = { add_character_modifier = { modifier = bra_fresh_ruler_of_brandenburg years = -1 mode = add_and_extend } }
		add_stability = stability_mild_bonus
		remove_country_modifier = bra_wittelsbacher_neglect
		remove_variable = bra_wittelsbacher_investment_var
	}
}

#Vassalization event
turmoil_in_brandenburg.1104 = {
	type = country_event
	category = disaster_event
	title = turmoil_in_brandenburg.1104.title
	image = "gfx/interface/illustrations/disaster/turmoil_in_brandenburg.dds"
	trigger = { always = no }
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = { scope:cabinet_character = { dynasty = dynasty:wittelsbach_dynasty } }
				desc = turmoil_in_brandenburg.1104.desc.wittelsbach
			}
		}
		first_valid = {
			triggered_desc = {
				trigger = { scope:cabinet_character = { NOT = { dynasty = dynasty:wittelsbach_dynasty } } }
				desc = turmoil_in_brandenburg.1104.desc
			}
		}
	}
	immediate = {
	}

	option = {
		name = turmoil_in_brandenburg.1104.a
		trigger = { scope:cabinet_character = { dynasty = dynasty:wittelsbach_dynasty } }
		make_subject_of = {
			target = scope:emperor_country
			type = subject_type:vassal
		}
		scope:cabinet_character = { move_country = root }
		set_new_ruler = scope:cabinet_character
		add_stability = stability_mild_bonus
	}
	option = {
		name = turmoil_in_brandenburg.1104.b
		trigger = { scope:cabinet_character = { NOT = { dynasty = dynasty:wittelsbach_dynasty } } }
		make_subject_of = {
			target = scope:emperor_country
			type = subject_type:vassal
		}
		scope:cabinet_character = { move_country = root }
		set_new_ruler = scope:cabinet_character
		add_stability = stability_mild_bonus
	}
	option = {
		name = turmoil_in_brandenburg.1104.c
		scope:emperor_country = {
			trigger_event_silently = turmoil_in_brandenburg.1107
			show_as_tooltip = {
				add_casus_belli = {
					type = casus_belli:cb_subjugation
					target = scope:root_country
				}
				add_opinion = {
					target = scope:root_country
					modifier = opinion_resists_our_influence
				}
			}
		}
	}
	after = {
		remove_country_modifier = bra_wittelsbacher_neglect
		remove_variable = bra_wittelsbacher_investment_var
	}
}

#Hohenzollern event
turmoil_in_brandenburg.1105 = {
	type = country_event
	category = disaster_event
	title = turmoil_in_brandenburg.1105.title
	image = "gfx/interface/illustrations/disaster/turmoil_in_brandenburg.dds"

	desc = turmoil_in_brandenburg.1105.desc
	immediate = {
		create_character = {
			first_name = name_frederick
			dynasty = dynasty:hohenzollern_dynasty
			estate = estate_type:nobles_estate
			adm = { 60 80 }
			dip = { 60 80 }
			mil = { 60 80 }
			age = 30
			script = bra_friedrich_hohenzollern
			save_scope_as = hohenzollern_character
		}
		set_variable = { name = bra_blocked_from_hohenzoller_event value = yes }
	}
	option = {
		name = turmoil_in_brandenburg.1105.a
		set_new_ruler = scope:hohenzollern_character
		add_stability = stability_mild_bonus
		remove_country_modifier = bra_wittelsbacher_neglect
		remove_variable = bra_wittelsbacher_investment_var
	}
}

#Wittelsbacher keep it for some reason...
turmoil_in_brandenburg.1106 = {
	type = country_event
	category = disaster_event
	title = turmoil_in_brandenburg.1106.title
	image = "gfx/interface/illustrations/disaster/turmoil_in_brandenburg.dds"
	trigger = { always = no }
	desc = turmoil_in_brandenburg.1106.desc

	immediate = {
	}

	option = {
		name = turmoil_in_brandenburg.1106.a
		add_legitimacy = legitimacy_severe_penalty
		remove_country_modifier = bra_wittelsbacher_neglect
		remove_variable = bra_wittelsbacher_investment_var
	}
}

#Brandenburg fights back!
turmoil_in_brandenburg.1107 = {
	type = country_event
	category = disaster_event
	title = turmoil_in_brandenburg.1107.title
	image = "gfx/interface/illustrations/disaster/turmoil_in_brandenburg.dds"
	trigger = { always = no }
	desc = turmoil_in_brandenburg.1107.desc

	immediate = {
	}
	option = {
		name = turmoil_in_brandenburg.1107.a
		add_casus_belli = {
			type = casus_belli:cb_subjugation
			target = scope:root_country
		}
		add_opinion = {
			target = scope:root_country
			modifier = opinion_resists_our_influence
		}
	}
}
#Brandenburgian Burden
turmoil_in_brandenburg.1200 = {
	type = country_event
	category = disaster_event
	title = turmoil_in_brandenburg.1200.title
	image = "gfx/interface/illustrations/disaster/turmoil_in_brandenburg.dds"

	fire_only_once = yes
	trigger = { always = no }
	desc = turmoil_in_brandenburg.1200.desc
	immediate = {
		create_character = {
			first_name = name_frederick
			dynasty = dynasty:hohenzollern_dynasty
			estate = estate_type:nobles_estate
			adm = {60 80}
			dip = {60 80}
			mil = {60 80}
			age = 30
			script = bra_friedrich_hohenzollern
			save_scope_as = hohenzollern_character
		}
		c:BRA = { save_scope_as = bra_country }
		save_scope_as = emperor_country
		ruler ?= {
			save_scope_as = emperor_ruler
			dynasty ?= {
				save_scope_as = emperor_dynasty
			}
		}
	}
	#Place the Hohenzoller on their throne
	option = {
		name = turmoil_in_brandenburg.1200.a
		historical_option = yes
		custom_tooltip = {
			text = turmoil_in_brandenburg.1200.a.tt
			scope:bra_country = { trigger_event_silently = { id = turmoil_in_brandenburg.1201 days = 3 } }
		}
		if = {
			limit = { scope:bra_country = { is_subject_of = root } }
			show_as_tooltip = {
				cancel_subject = scope:bra_country
			}
		}
	}
	#Keep the Union
	option = {
		name = turmoil_in_brandenburg.1200.b
		add_stability = stability_severe_penalty
		change_imperial_authority = { value = imperial_authority_very_strong_penalty }
	}
}

#The Hohenzollern
turmoil_in_brandenburg.1201 = {
	type = country_event
	category = disaster_event
	title = turmoil_in_brandenburg.1201.title
	image = "gfx/interface/illustrations/disaster/turmoil_in_brandenburg.dds"
	trigger = { always = no }
	illustration_tags = {
		10 = exterior
		10 = armed
	}
	desc = turmoil_in_brandenburg.1201.desc

	option = {
		name = turmoil_in_brandenburg.1201.a
		scope:hohenzollern_character = {
			move_country = root
		}
		set_new_ruler = scope:hohenzollern_character
		if = {
			limit = { is_subject = yes }
			overlord = {
				cancel_subject = root
			}
		}
		add_legitimacy = legitimacy_mild_bonus
	}
}

#Robber Barons

scripted_trigger can_have_robber_barons = {
	always = no
}
scripted_effect select_baron_province = {
	random_province = {
		limit = {
			can_have_robber_barons = yes
		}
		save_scope_as = robber_baron_province
		set_variable = pru_has_had_robber_barons
	}
}

scripted_effect set_robber_baron_troubles = {
	add_province_modifier = {
		modifier = PRU_robber_barons
		years = -1
		mode = add_and_extend
	}

	every_location_in_province = {
		change_control = control_severe_penalty
	}

	custom_tooltip = PRU_use_cabinet_action_to_get_rid_of_barons
}

#Changed by mod
# Pushed it back from 1370 to 1390, giving the player more time to prepare for it, and also to make it more likely to happen after the Hohenzollern are on the throne
# Start of Robber Baron Troubles
turmoil_in_brandenburg.1300 = {
	type = country_event
	category = disaster_event
	title = turmoil_in_brandenburg.1300.title
	desc = turmoil_in_brandenburg.1300.desc
	image = "gfx/interface/illustrations/disaster/turmoil_in_brandenburg.dds"

	dynamic_historical_event = {
		tag = BRA
		tag = PRU
		from = 1390.1.1
		to = 1500.1.1
		monthly_chance = 20
	}

	fire_only_once = yes

	trigger = {
		always = no
	}
	immediate = {
		set_variable = PRU_robber_barons_active
		select_baron_province = yes
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:peasants_estate }
		ruler = {
			save_scope_as = target_ruler
		}
	}

	option = {
		name = turmoil_in_brandenburg.1300.a

		change_societal_value = {
			type = centralization_vs_decentralization
			value = societal_value_large_move_to_right
		}

		add_legitimacy = legitimacy_mild_penalty

		scope:robber_baron_province = {
			set_robber_baron_troubles = yes
		}
	}
}

#Robber Baron Troubles
turmoil_in_brandenburg.1301  = {
	type = country_event
	category = disaster_event
	title = turmoil_in_brandenburg.1301.title
	desc = turmoil_in_brandenburg.1301.desc
	image = "gfx/interface/illustrations/disaster/turmoil_in_brandenburg.dds"

	trigger = {
		always = no
	}

	immediate = {
		select_baron_province = yes
	}

	option = {
		name = turmoil_in_brandenburg.1301.a

		scope:robber_baron_province = {
			set_robber_baron_troubles = yes
		}
	}
}

# Von Quitzow Family
turmoil_in_brandenburg.1302  = {
	type = country_event
	category = disaster_event
	title = turmoil_in_brandenburg.1302.title
	desc = turmoil_in_brandenburg.1302.desc
	historical_info = turmoil_in_brandenburg.1302.historical_info
	image = "gfx/interface/illustrations/disaster/turmoil_in_brandenburg.dds"
	fire_only_once = yes
	dynamic_historical_event = {
		tag = BRA
		tag = PRU
		from = 1380.1.1
		to = 1420.1.1
		monthly_chance = 20
	}

	trigger = {
		always = no
	}

	immediate = {
		location:berlin = {
			add_to_list = quitzow_places
		}
		location:potsdam = {
			add_to_list = quitzow_places
		}
		location:brandenburg = {
			add_to_list = quitzow_places
		}
		location:freienwalde = {
			add_to_list = quitzow_places
		}
		location:herzfelde = {
			add_to_list = quitzow_places
		}
		create_rebel = {
			name = bra_quitzow_revolt
			category = estate
			estate = nobles_estate
			save_scope_as = target_rebel
		}
		while = {
			limit = {
				list_size = { name = quitzow_places value < 3 }
				any_owned_location = {
					NOT = { is_in_list = quitzow_places }
				}
			}
			random_owned_location = {
				limit = {
					NOT = { is_in_list = quitzow_places }
				}
				add_to_list = quitzow_places
			}
		}
	}

	option = {
		name = turmoil_in_brandenburg.1302.a

		historical_option = yes

		change_gold_effect = { scale = -6 }

		every_in_list = {
			list = quitzow_places
			every_pop = {
				limit = {
					owner = root
					pop_type = pop_type:nobles
				}
				add_pop_satisfaction = pop_satisfaction_radical_penalty
				change_pop_allegiance = scope:target_rebel
			}
			change_control = control_severe_penalty
			add_location_modifier = {
				modifier = PRU_quitzow_repressed_modifier
				years = 20
			}
		}

		add_estate_satisfaction = {
			type = estate_type:nobles_estate
			value = estate_satisfaction_severe_penalty
		}

		change_societal_value = {
			type = centralization_vs_decentralization
			value = societal_value_minor_move_to_left
		}

		remove_variable = robber_barons_issues_are_ignored
		set_variable = {
			name = robber_barons_issues_are_dealt_with
			years = 10
		}
	}

	option = {
		name = turmoil_in_brandenburg.1302.b

		add_legitimacy = legitimacy_severe_penalty

		add_estate_satisfaction = {
			type = estate_type:nobles_estate
			value = estate_satisfaction_mild_bonus
		}

		every_in_list = {
			list = quitzow_places
			change_control = control_ultimate_penalty
			add_location_modifier = {
				modifier = PRU_quitzow_modifier
				years = 20
			}
		}
	}
}

# End of Robber Baron Troubles
turmoil_in_brandenburg.1303  = {
	type = country_event
	category = disaster_event
	title = turmoil_in_brandenburg.1303.title
	desc = turmoil_in_brandenburg.1303.desc
	image = "gfx/interface/illustrations/disaster/turmoil_in_brandenburg.dds"
	fire_only_once = yes
	dynamic_historical_event = {
		tag = BRA
		tag = PRU
		from = 1380.1.1
		to = 1821.1.1 #Robber baron issue must be able to be resolved
		monthly_chance = 20
	}


	trigger = {
		always = no
	}

	immediate = {
		remove_variable = PRU_robber_barons_active
		set_variable = PRU_robber_barons_not_active
		every_province = {
			remove_province_modifier = PRU_robber_barons
			remove_variable = pru_has_had_robber_barons
		}
	}

	option = {
		name = turmoil_in_brandenburg.1303.a

		change_societal_value = {
			type = centralization_vs_decentralization
			value = societal_value_large_move_to_left
		}

		add_legitimacy = legitimacy_mild_bonus

		add_country_modifier = {
			modifier = PRU_end_of_robber_barons
			years = 50
		}
	}

	after = {
		hidden_effect = {
			set_variable = robber_barons_aftermath
		}
	}
}

# Aftermath of the Robber Barons
turmoil_in_brandenburg.1304  = {
	type = country_event
	category = disaster_event
	title = turmoil_in_brandenburg.1304.title
	desc = turmoil_in_brandenburg.1304.desc
	image = "gfx/interface/illustrations/disaster/turmoil_in_brandenburg.dds"
	fire_only_once = yes

	dynamic_historical_event = {
		tag = BRA
		tag = PRU
		from = 1410.1.1
		to = 1821.1.1
		monthly_chance = 20
	}

	trigger = {
		always = no
	}

	immediate = {
	}

	option = {
		name = turmoil_in_brandenburg.1304.a
		add_legitimacy = legitimacy_severe_bonus
		"estate(estate_type:nobles_estate)" = {
			estate_add_gold = {
				value = {
					add = root.monthly_income_total
					multiply = -4
				}
			}
		}
		add_estate_satisfaction = {
			type = estate_type:nobles_estate
			value = estate_satisfaction_severe_penalty
		}
		add_country_modifier = {
			modifier = PRU_harsh_suppression
			years = 20
		}
	}

	option = {
		name = turmoil_in_brandenburg.1304.b
		add_legitimacy = legitimacy_mild_bonus
		"estate(estate_type:nobles_estate)" = {
			estate_add_gold = {
				value = {
					add = root.monthly_income_total
					multiply = -1
				}
			}
		}
		add_estate_satisfaction = {
			type = estate_type:nobles_estate
			value = estate_satisfaction_mild_penalty
		}
		add_country_modifier = {
			modifier = PRU_mild_suppression
			years = 20
		}
	}

	option = {
		name = turmoil_in_brandenburg.1304.c
		add_legitimacy = legitimacy_weak_bonus
		add_estate_satisfaction = {
			type = estate_type:nobles_estate
			value = estate_satisfaction_mild_bonus
		}
		add_country_modifier = {
			modifier = PRU_noble_reconciliation
			years = 20
		}
	}

	after = {
		hidden_effect = {
			remove_variable = robber_barons_aftermath
		}
	}
}